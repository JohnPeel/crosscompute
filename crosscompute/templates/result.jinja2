{% extends base_template %}
{% from 'type.jinja2' import render_values with context %}

{% block title %}
{{ result_id }} &middot; {{ render_title(tool_name) }} &middot; {{ website_name }}
{% endblock %}

{% block head_style_inline %}
{{ super() }}
.download {margin-top: 2em}
#standard-errors {background-color: yellow}
{% endblock %}

{% block body_content %}
{{ super() }}
<h2>Parameters</h2>
<div id="result_arguments">
{{ render_values(result_arguments) }}
</div>

{% if result_properties %}
{% set standard_errors = result_properties.pop('standard_errors', {}) %}
{% if standard_errors %}<h2>Errors</h2><div id="standard-errors">{{ render_values(standard_errors) }}</div>{% endif %}

{% set standard_outputs = result_properties.pop('standard_outputs', {}) %}
{% if standard_outputs %}<h2>Outputs</h2><div id="standard-outputs">{{ render_values(standard_outputs) }}</div>{% endif %}

<h2>Properties</h2><div id="result_properties">{{ render_values(result_properties) }}</div>
<a href="{{ request.route_path('result_name.zip', id=result_id, name='%s-%s' % (result_id, tool_name)) }}" class="btn btn-success download" role="button" download>Download</a>
{% endif %}
{% endblock %}

{% block body_script_inline %}
{{ super() }}
$('[data-toggle="popover"]').popover({'trigger': 'click hover focus'});
{% endblock %}
