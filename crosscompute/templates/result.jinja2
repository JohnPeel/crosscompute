{% extends 'page.jinja2' %}
{% from 'type.jinja2' import render_values with context %}
{% set result_name = result_name or '%s (%s)' % (result_id, render_title(tool_name)) %}

{% block page_title %}
{% block body_title %}{{ result_name }}{% endblock %} &middot; Results &middot; {{ website_name -}}
{% endblock %}

{% block head_style_inline %}
.download {margin-top: 2em}
{{ super() -}}
{% endblock %}

{% block body_content %}
{{ super() -}}

{% if result_arguments %}
<h2>Arguments</h2>
<div id="result_arguments">
{{ render_values(result_arguments) -}}
</div>
{% endif -%}

{% if result_properties -%}

{% set standard_errors = result_properties.pop('standard_errors', {}) %}
{% set type_errors = result_properties.pop('type_errors', {}) %}
{% if standard_errors or type_errors %}
<h2>Errors</h2>
<div class="error">
{{ render_values(standard_errors) -}}
{{ render_values(type_errors) -}}
</div>
{% endif -%}

{% set standard_outputs = result_properties.pop('standard_outputs', {}) %}
{% if standard_outputs %}
<h2>Outputs</h2>
<div id="standard-outputs">
{{ render_values(standard_outputs) -}}
</div>
{% endif -%}

<h2>Properties</h2>
<div id="result_properties">
{{ render_values(result_properties) -}}
</div>
<a href="{{ request.route_path('result.zip', id=result_id, name=result_name) }}" class="btn btn-success download" role="button" download>Download</a>
{% endif %}
{% endblock %}
